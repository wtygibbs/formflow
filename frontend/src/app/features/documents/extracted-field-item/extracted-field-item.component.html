<div class="p-3 hover:bg-muted/50 transition-colors border-b last:border-b-0"
     [class.bg-green-50/50]="field().isVerified">
  <!-- Field Row -->
  <div class="flex items-start gap-3">
    <!-- Field Name & Value -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1 flex-wrap">
        <span class="text-sm font-medium text-muted-foreground">{{ field().fieldName }}</span>
        @switch (getConfidenceClass(field().confidence)) {
          @case ('high') {
            <span class="text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700">
              {{ (field().confidence * 100).toFixed(0) }}%
            </span>
          }
          @case ('medium') {
            <span class="text-xs px-1.5 py-0.5 rounded bg-yellow-100 text-yellow-700">
              {{ (field().confidence * 100).toFixed(0) }}%
            </span>
          }
          @case ('low') {
            <span class="text-xs px-1.5 py-0.5 rounded bg-red-100 text-red-700">
              {{ (field().confidence * 100).toFixed(0) }}%
            </span>
          }
        }
        @if (field().isVerified) {
          <span class="text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700">âœ“ Verified</span>
        }
        @if (field().editedValue) {
          <span class="text-xs px-1.5 py-0.5 rounded bg-blue-100 text-blue-700">Edited</span>
        }
      </div>

      @if (isEditing()) {
        <div class="flex gap-2 mt-1">
          <input
            hlmInput
            type="text"
            [(ngModel)]="editValue"
            class="flex-1 h-8 text-sm"
            placeholder="Enter corrected value"
          />
          <button hlmBtn size="sm" (click)="onSave()" class="h-8 px-2 text-xs">Save</button>
          <button hlmBtn variant="ghost" size="sm" (click)="onCancel()" class="h-8 px-2 text-xs">âœ•</button>
        </div>
      } @else {
        <div class="flex items-center gap-2 group">
          <span class="font-mono text-sm flex-1" [title]="field().editedValue || field().fieldValue">
            {{ field().editedValue || field().fieldValue }}
          </span>
          <button
            hlmBtn
            variant="ghost"
            size="sm"
            class="h-7 w-7 p-0 opacity-0 group-hover:opacity-100 transition-opacity"
            (click)="onCopy()"
            title="Copy"
          >
            ðŸ“‹
          </button>
        </div>
      }
    </div>

    <!-- Actions -->
    @if (!isEditing()) {
      <div class="flex gap-1 flex-shrink-0">
        <button
          hlmBtn
          variant="ghost"
          size="sm"
          class="h-7 px-2 text-xs"
          (click)="onEdit()"
        >
          Edit
        </button>
        @if (!field().isVerified) {
          <button
            hlmBtn
            variant="ghost"
            size="sm"
            class="h-7 px-2 text-xs"
            (click)="onVerify()"
          >
            Verify
          </button>
        }
      </div>
    }
  </div>
</div>
